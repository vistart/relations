# 核心概念

## 概述

Relations 包提供了一种类型安全的方式来定义和管理 Python 模型之间的关系。它围绕以下几个关键概念构建：

## 关系类型

支持三种主要的关系类型：

- **BelongsTo**: 表示多对一或一对一关系，实例属于单个关联实例
- **HasOne**: 表示一对一关系，实例有且仅有一个关联实例
- **HasMany**: 表示一对多关系，实例有多个关联实例

## 关系描述符

RelationDescriptor 是管理关系的核心类。它：

- 处理相关数据的延迟加载
- 管理关系缓存
- 验证关系配置
- 支持循环依赖的前向引用

## 关系管理

RelationManagementMixin 提供：

- 关系注册
- 缓存管理
- 关系查询能力
- 关系元数据访问

## 数据加载

数据加载通过以下方式处理：

- **RelationLoader**: 加载关联实例的接口
- **RelationQuery**: 查询关联数据的接口
- 针对特定数据源的自定义加载器实现

## 缓存

缓存系统提供：

- 可配置的 TTL（生存时间）
- 大小限制
- 线程安全操作
- 全局和每个关系的配置

## 类型安全

通过以下方式强制类型安全：

- 泛型类型参数
- 运行时类型检查
- 关系验证
- 前向引用解析

实现细节请参见[高级用法](advanced-usage.md)。